<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Document Analyzer</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <main class="container">
    <header class="header">
      <h1>Document Analyzer</h1>
    </header>

    <!-- Tab Navigation (4 tabs) -->
    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="library">Documents</button>
      <button class="tab-btn" data-tab="analyze">Analyze & Ask</button>
      <button class="tab-btn" data-tab="obligations">Obligations <span id="obligationBadge" class="tab-badge" style="display:none;">0</span></button>
      <button class="tab-btn" data-tab="settings">Settings</button>
    </nav>

    <!-- ============================================
         Tab 1: Documents
         ============================================ -->
    <section class="tab-content active" id="tab-library">
      <div class="card">
        <h2 class="section-title">Document Library</h2>
        <p class="subtle" style="margin-bottom: 1rem;">Upload and manage documents for Q&A and cross-referencing.</p>

        <!-- Upload Form -->
        <div class="upload-section">
          <h3>Upload Document</h3>
          <div class="upload-form">
            <div class="upload-row">
              <input type="file" id="uploadFileInput" accept=".pdf,.docx" />
              <select id="uploadCategoryInput" class="category-input">
                <option value="">No Category</option>
                <option value="Finance">Finance</option>
                <option value="Compliance">Compliance</option>
                <option value="Operations">Operations</option>
                <option value="HR">HR</option>
                <option value="Board">Board</option>
                <option value="IT">IT</option>
              </select>
              <button id="uploadBtn" type="button" class="btn-primary">Upload</button>
            </div>
            <p class="hint">Supported formats: PDF, DOCX (max 10MB)</p>
          </div>
        </div>

        <div class="library-divider"></div>

        <div class="library-actions">
          <button id="scanBtn" type="button" class="btn-secondary">Scan Server Folder</button>
          <button id="scanGDriveBtn" type="button" class="btn-secondary">Scan Google Drive</button>
          <button id="processAllBtn" type="button" class="btn-secondary">Process All</button>
          <button id="retagAllBtn" type="button" class="btn-secondary">Retag All</button>
          <button id="toggleAllMeta" type="button" class="btn-secondary btn-toggle-meta">Show All Details</button>
          <span id="embeddingStatus" class="embedding-status"></span>
          <span id="gdriveStatus" class="gdrive-status" style="display:none;"></span>
        </div>

        <div id="libraryStatus" class="status" style="margin-top: 1rem; display: none;"></div>

        <div id="documentList" class="document-list">
          <p class="subtle">No documents found. Upload a document or scan the server folder.</p>
        </div>
      </div>

    </section>

    <!-- ============================================
         Tab 2: Analyze & Ask
         ============================================ -->
    <section class="tab-content" id="tab-analyze">

      <!-- Section A: Analyze Document -->
      <div class="card">
        <h2 class="section-title">Analyze Document</h2>
        <p class="subtle" style="margin-bottom: 1rem;">Upload a file to translate, summarize, and extract key information.</p>

        <form id="analyzeForm">
          <div class="field">
            <label for="analyzerFileInput">Document (PDF or DOCX)</label>
            <input id="analyzerFileInput" type="file"
              accept=".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
              required />
          </div>

          <div class="field">
            <label>Outputs (choose at least 1)</label>
            <div class="checks" id="analyzerOutputs">
              <label class="check">
                <input type="checkbox" name="analyzerOutputs" value="translation" checked />
                <span>Full translation</span>
              </label>
              <label class="check">
                <input type="checkbox" name="analyzerOutputs" value="summary" checked />
                <span>Summary</span>
              </label>
              <label class="check">
                <input type="checkbox" name="analyzerOutputs" value="key_points" />
                <span>Key points</span>
              </label>
              <label class="check">
                <input type="checkbox" name="analyzerOutputs" value="todos" />
                <span>Department to-do list</span>
              </label>
            </div>
          </div>

          <div class="field">
            <label for="analyzerTranslateTo">Translate to</label>
            <select id="analyzerTranslateTo" required>
              <option value="English">English</option>
              <option value="Polish">Polish</option>
              <option value="German">German</option>
              <option value="French">French</option>
              <option value="Spanish">Spanish</option>
            </select>
          </div>

          <div class="actions">
            <button id="analyzeBtn" type="submit" disabled>Analyze</button>
            <button id="analyzerClearBtn" type="button">Clear</button>
          </div>

          <div id="analyzerStatus" class="status">Choose at least one output to enable Analyze.</div>
        </form>
      </div>

      <!-- Analyzer Results -->
      <section class="card" id="analyzerResultsCard" style="display: none;">
        <div class="result-block" id="analyzerTranslationBlock" style="display: none;">
          <details class="disclosure" id="analyzerTranslatedDisclosure" open>
            <summary>
              <span>Translated document</span>
              <span class="subtle">Click to expand/collapse</span>
            </summary>
            <div style="margin-top:10px;">
              <div class="result-actions">
                <button id="exportAnalyzerTranslationBtn" type="button" class="btn-export">Export</button>
              </div>
              <div id="analyzerTranslatedDoc" class="result-box subtle" style="margin-top:10px;">No data yet.</div>
            </div>
          </details>
        </div>

        <div class="result-block" id="analyzerSummaryBlock" style="display: none;">
          <h3>Summary</h3>
          <div id="analyzerSummary" class="result-box subtle">No data yet.</div>
        </div>

        <div class="result-block" id="analyzerKeyPointsBlock" style="display: none;">
          <h3>Key points</h3>
          <div id="analyzerKeyPoints" class="result-box subtle">No data yet.</div>
        </div>

        <div class="result-block" id="analyzerTodosBlock" style="display: none;">
          <h3>To-dos by department</h3>
          <div class="result-actions">
            <button id="exportAnalyzerTodosBtn" type="button" class="btn-export">Export</button>
          </div>
          <div id="analyzerTodos" class="result-box subtle" style="margin-top:10px;">No data yet.</div>
        </div>
      </section>

      <div style="height: 1.5rem;"></div>

      <!-- Section B: Ask the Library -->
      <div class="card">
        <h2 class="section-title">Ask the Library</h2>
        <p class="subtle" style="margin-bottom: 1rem;">Select documents from your library and ask questions. AI finds answers using semantic search.</p>

        <div class="desk-section">
          <div class="field">
            <label class="entire-library-toggle">
              <input type="checkbox" id="qaEntireLibrary" />
              <span class="entire-library-label">Search entire library</span>
              <span class="entire-library-hint">AI automatically selects the best matching documents</span>
            </label>
            <div class="field-header">
              <label>Or select specific documents</label>
              <button type="button" id="qaSelectAllBtn" class="btn-select-all">Select All</button>
            </div>
            <div id="deskDocumentSelect" class="document-select-list">
              <p class="subtle">Loading documents...</p>
            </div>
          </div>

          <div class="field">
            <textarea id="questionInput" rows="3" placeholder="Type your question here..."></textarea>
          </div>

          <div class="actions">
            <button id="askBtn" type="button" disabled>Ask Question</button>
          </div>

          <div id="qaStatus" class="status" style="margin-top: 1rem; display: none;"></div>

          <div id="answerSection" class="answer-section" style="display: none;">
            <h4>Answer</h4>
            <div id="answerContent" class="answer-content"></div>

            <div id="sourcesSection" style="display: none;">
              <h5>Sources</h5>
              <div id="sourcesList" class="sources-list"></div>
            </div>
          </div>
        </div>
      </div>

      <div style="height: 1.5rem;"></div>

      <!-- Section C: Cross-Reference & Response Template -->
      <div class="card">
        <h2 class="section-title">Cross-Reference & Response Template</h2>
        <p class="subtle" style="margin-bottom: 1rem;">Upload an external document to cross-reference against your library and generate response templates.</p>

        <div class="desk-section">
          <!-- Document Type Selector -->
          <div class="field">
            <label>Document Type</label>
            <div class="checks" id="deskDocType">
              <label class="check">
                <input type="radio" name="deskDocType" value="regulator_query" checked />
                <span>Regulator Query</span>
              </label>
              <label class="check">
                <input type="radio" name="deskDocType" value="questionnaire" />
                <span>Questionnaire</span>
              </label>
            </div>
          </div>

          <!-- Regulator Query UI (default) -->
          <div id="regulatorQuerySection">
            <div class="field">
              <label for="deskExternalFile">External Document (PDF or DOCX)</label>
              <input id="deskExternalFile" type="file"
                accept=".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document" />
              <p class="hint">This is the document you want to respond to.</p>
            </div>

            <div class="field">
              <label>Outputs</label>
              <div class="checks" id="deskOutputs">
                <label class="check">
                  <input type="checkbox" name="deskOutputs" value="cross_reference" />
                  <span>Cross-reference findings</span>
                </label>
                <label class="check">
                  <input type="checkbox" name="deskOutputs" value="generate_template" checked />
                  <span>Generate response template</span>
                </label>
              </div>
            </div>

            <div class="field" id="deskPrefillField">
              <label class="check prefill-check">
                <input type="checkbox" id="deskPrefillToggle" />
                <span>Pre-fill response template with data from library documents</span>
              </label>
              <p class="hint">When enabled, the template will be automatically filled with data found in your library documents.</p>
            </div>

            <div class="field" id="deskCrossRefField">
              <div class="field-header">
                <label>Select Library Documents <span class="hint-inline">(required for cross-reference or pre-fill)</span></label>
                <button type="button" id="crossRefSelectAllBtn" class="btn-select-all">Select All</button>
              </div>
              <div id="deskCrossRefSelect" class="document-select-list categorized">
                <p class="subtle">Loading documents...</p>
              </div>
            </div>

            <div class="field">
              <label for="deskTranslateTo">Output language</label>
              <select id="deskTranslateTo">
                <option value="English">English</option>
                <option value="Polish">Polish</option>
                <option value="German">German</option>
                <option value="French">French</option>
                <option value="Spanish">Spanish</option>
              </select>
            </div>

            <div class="actions">
              <button id="deskAnalyzeBtn" type="button" disabled>Analyze & Generate</button>
              <button id="deskClearBtn" type="button">Clear</button>
              <div id="deskModelIndicator" class="model-indicator"></div>
            </div>

            <div id="deskStatus" class="status" style="display: none;"></div>
          </div>

          <!-- Questionnaire UI (hidden by default) -->
          <div id="questionnaireSection" style="display: none;">
            <div class="field">
              <label for="qaUploadFile">Questionnaire File (Excel, PDF, or DOCX)</label>
              <input id="qaUploadFile" type="file"
                accept=".pdf,.docx,.xlsx,.xls,.csv,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel" />
              <p class="hint">Upload an Excel, PDF, or DOCX questionnaire file.</p>
            </div>

            <div class="field">
              <label for="qaPastedText">Or paste questionnaire text</label>
              <textarea id="qaPastedText" rows="4" placeholder="Paste questionnaire text here (questions will be extracted automatically)..."></textarea>
            </div>

            <div class="field" id="qaLibraryDocsField">
              <div class="field-header">
                <label>Select Library Documents <span class="hint-inline">(to search for answers)</span></label>
                <button type="button" id="qaLibSelectAllBtn" class="btn-select-all">Select All</button>
              </div>
              <div id="qaLibraryDocSelect" class="document-select-list categorized">
                <p class="subtle">Loading documents...</p>
              </div>
            </div>

            <div class="actions">
              <button id="processQuestionnaireBtn" type="button" disabled>Process Questionnaire</button>
              <button id="qaClearBtn" type="button">Clear</button>
            </div>

            <div id="qaProcessStatus" class="status" style="display: none;"></div>
          </div>
        </div>
      </div>

      <!-- Desk Results (Regulator Query) -->
      <section class="card" id="deskResultsCard" style="display: none;">
        <div class="result-block" id="deskCrossRefBlock" style="display: none;">
          <h3>Cross-reference Findings</h3>
          <div id="deskCrossRef" class="result-box subtle">No data yet.</div>
        </div>

        <div class="result-block" id="deskTemplateBlock" style="display: none;">
          <h3>Response Template</h3>
          <div class="result-actions">
            <button id="exportDeskTemplateBtn" type="button" class="btn-export">Export</button>
          </div>
          <div id="deskTemplateBox" class="result-box subtle" style="margin-top:10px;">No data yet.</div>
        </div>
      </section>

      <!-- Questionnaire Review Results -->
      <section class="card" id="questionnaireResultsCard" style="display: none;">
        <div class="field-header">
          <h3>Questionnaire Review</h3>
          <div class="qa-review-stats" id="qaReviewStats"></div>
        </div>
        <div class="qa-review-actions">
          <button id="qaApproveAllHighBtn" type="button" class="btn-secondary">Approve All High Confidence</button>
          <button id="qaApproveAllBtn" type="button" class="btn-primary">Approve All</button>
          <button id="qaExportBtn" type="button" class="btn-export">Export</button>
        </div>
        <div id="qaReviewList" class="qa-review-list"></div>
      </section>
    </section>

    <!-- ============================================
         Tab 3: Obligations
         ============================================ -->
    <section class="tab-content" id="tab-obligations">
      <div class="card">
        <h2 class="section-title">Contract Obligations</h2>
        <p class="subtle" style="margin-bottom: 1rem;">Active obligations across all contracts, grouped by contract.</p>

        <!-- Stats bar -->
        <div id="obligationsStats" class="obligations-stats-bar"></div>

        <!-- Filter controls -->
        <div class="obligations-controls">
          <div class="obligations-filter">
            <label>Show:</label>
            <select id="obligationFilterStatus">
              <option value="active" selected>Active</option>
              <option value="finalized">Finalized</option>
              <option value="all">All</option>
            </select>
          </div>
        </div>

        <!-- Obligations list grouped by contract -->
        <div id="obligationsActiveList" class="obligations-tab-list">
          <p class="subtle">No obligations found. Process a contract in the Documents tab and use the Action Hub to manage it.</p>
        </div>
      </div>
    </section>

    <!-- ============================================
         Tab 4: Settings
         ============================================ -->
    <section class="tab-content" id="tab-settings">
      <div class="card">
        <h2 class="section-title">Settings</h2>
        <p class="subtle" style="margin-bottom: 1.5rem;">Configure AI optimization, integrations, and maintenance.</p>

        <!-- AI & Optimization -->
        <div class="settings-section">
          <h3>AI & Optimization</h3>
          <p class="hint" style="margin-bottom: 1rem;">These settings help reduce token usage while maintaining output quality.</p>

          <div class="settings-list">
            <!-- Use Haiku for extraction -->
            <div class="setting-item">
              <div class="setting-info">
                <label class="setting-label" for="settingHaiku">Use Haiku for extraction tasks</label>
                <p class="setting-description">Use Claude Haiku (cheaper, faster) for extracting questions from documents instead of Sonnet. Saves ~90% on extraction costs.</p>
              </div>
              <div class="setting-control">
                <label class="toggle-switch">
                  <input type="checkbox" id="settingHaiku" checked />
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <!-- Skip translation if same language -->
            <div class="setting-item">
              <div class="setting-info">
                <label class="setting-label" for="settingSkipTranslation">Skip translation if same language</label>
                <p class="setting-description">Automatically detect if the document is already in the target language and skip translation. Uses language detection with 70%+ confidence threshold.</p>
              </div>
              <div class="setting-control">
                <label class="toggle-switch">
                  <input type="checkbox" id="settingSkipTranslation" checked />
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <!-- Relevance threshold -->
            <div class="setting-item">
              <div class="setting-info">
                <label class="setting-label" for="settingRelevanceThreshold">Use relevance threshold filtering</label>
                <p class="setting-description">Filter out low-relevance search results before sending to Claude. Reduces context size and improves response quality.</p>
              </div>
              <div class="setting-control">
                <label class="toggle-switch">
                  <input type="checkbox" id="settingRelevanceThreshold" checked />
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>

            <!-- Relevance threshold value slider -->
            <div class="setting-item setting-sub-item" id="relevanceThresholdValueSetting">
              <div class="setting-info">
                <label class="setting-label" for="settingRelevanceValue">Relevance threshold value</label>
                <p class="setting-description">Minimum relevance score (0-100%). Results below this threshold are filtered out.</p>
              </div>
              <div class="setting-control setting-control-slider">
                <input type="range" id="settingRelevanceValue" min="0" max="100" value="25" class="slider" />
                <span id="relevanceValueDisplay" class="slider-value">25%</span>
              </div>
            </div>

            <!-- Minimum results guarantee -->
            <div class="setting-item setting-sub-item" id="minResultsSetting">
              <div class="setting-info">
                <label class="setting-label" for="settingMinResults">Minimum results guarantee</label>
                <p class="setting-description">Always return at least this many results, even if they fall below the relevance threshold.</p>
              </div>
              <div class="setting-control setting-control-number">
                <input type="number" id="settingMinResults" min="1" max="10" value="3" class="number-input" />
              </div>
            </div>
          </div>
        </div>

        <div class="library-divider"></div>

        <div class="settings-actions">
          <button id="saveSettingsBtn" type="button" class="btn-primary">Save Settings</button>
          <button id="resetSettingsBtn" type="button" class="btn-secondary">Reset to Defaults</button>
          <span id="settingsStatus" class="settings-status"></span>
        </div>

        <div class="library-divider"></div>

        <!-- Google Drive Integration -->
        <div class="settings-section">
          <h3>Google Drive Integration</h3>
          <p class="hint" style="margin-bottom: 1rem;">Connect to Google Drive using a service account. Share your Drive folder with the service account email, then paste the credentials JSON here.</p>

          <div class="settings-list">
            <div class="setting-item setting-item-vertical">
              <div class="setting-info">
                <label class="setting-label" for="settingGdriveServiceAccount">Service Account Credentials (JSON)</label>
                <p class="setting-description">Paste the full JSON key file from <em>Google Cloud Console &gt; IAM &gt; Service Accounts &gt; Keys</em>. The service account needs the Drive API enabled. Share your target folder with the service account's <code>client_email</code>.</p>
              </div>
              <div class="setting-control-full">
                <textarea id="settingGdriveServiceAccount" placeholder='{"type": "service_account", "client_email": "...", ...}' class="textarea-input" rows="4"></textarea>
                <p id="gdriveServiceAccountInfo" class="hint" style="margin-top: 0.5rem;"></p>
              </div>
            </div>

            <div class="setting-item">
              <div class="setting-info">
                <label class="setting-label" for="settingGdriveFolderId">Google Drive Folder ID</label>
                <p class="setting-description">The folder ID from the Drive URL. Open your folder and copy the ID after <em>/folders/</em> in the URL.</p>
              </div>
              <div class="setting-control setting-control-text">
                <input type="text" id="settingGdriveFolderId" placeholder="1ABC2DEF3GHI..." class="text-input" />
              </div>
            </div>
          </div>

          <div class="settings-actions" style="margin-top: 1rem;">
            <button id="saveGdriveSettingsBtn" type="button" class="btn-primary">Save Google Drive Settings</button>
            <span id="gdriveSettingsStatus" class="settings-status"></span>
          </div>
        </div>

        <div class="library-divider"></div>

        <!-- Maintenance (moved from Governance) -->
        <div class="settings-section">
          <h3>Maintenance</h3>
          <p class="hint">Run periodic checks: retention enforcement, unconfirmed tags, Google Drive sync.</p>
          <div class="actions" style="margin-top: 0.5rem;">
            <button id="runMaintenanceBtn" type="button" class="btn-secondary">Run Maintenance Now</button>
            <span id="maintenanceStatus" class="settings-status"></span>
          </div>
          <div id="maintenanceResult" style="display: none; margin-top: 1rem;"></div>
        </div>

        <div class="library-divider"></div>

        <!-- Statistics (moved from separate tab) -->
        <div class="settings-section">
          <h3>Usage & Costs</h3>
          <p class="hint" style="margin-bottom: 1rem;">Token usage from your last action.</p>

          <div id="statsContent">
            <div class="stats-empty">
              <p class="subtle">No statistics available yet. Perform an action to see token usage.</p>
            </div>
          </div>

          <div class="stats-info" style="margin-top: 1.5rem;">
            <h4>Token Pricing Reference</h4>
            <div class="pricing-table">
              <div class="pricing-row">
                <span class="pricing-service">Claude (Sonnet)</span>
                <span class="pricing-detail">Input: $3.00 / 1M tokens | Output: $15.00 / 1M tokens</span>
              </div>
              <div class="pricing-row">
                <span class="pricing-service">Claude (Haiku)</span>
                <span class="pricing-detail">Input: $0.25 / 1M tokens | Output: $1.25 / 1M tokens</span>
              </div>
              <div class="pricing-row">
                <span class="pricing-service">Voyage AI (voyage-3-lite)</span>
                <span class="pricing-detail">$0.02 / 1M tokens</span>
              </div>
            </div>
            <p class="hint" style="margin-top: 0.5rem;">
              Token counts are estimates. Claude tokens are reported directly from the API.
              Voyage AI tokens are estimated as ~1 token per 4 characters.
            </p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Evidence Selection Modal -->
  <div id="evidenceModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <h3>Add Evidence</h3>
      <p class="subtle" style="margin-bottom: 1rem;">Select a document from your library to link as evidence for this obligation.</p>
      <input type="hidden" id="evidenceObligationId" />
      <div class="field">
        <label for="evidenceNote">Note (optional)</label>
        <input type="text" id="evidenceNote" placeholder="e.g. See section 3.2 for compliance report" />
      </div>
      <div id="evidenceDocList" class="document-select-list categorized" style="max-height: 300px; overflow-y: auto;"></div>
      <div class="actions">
        <button id="cancelEvidenceBtn" type="button" class="btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Document Metadata Modal -->
  <div id="metadataModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <h3>Edit Document Metadata</h3>
      <input type="hidden" id="metadataDocId" />

      <p id="metaSummary" class="meta-summary"></p>

      <div class="modal-grid">
        <div class="field">
          <label for="metaDocType">Document Type</label>
          <select id="metaDocType">
            <option value="">Unknown</option>
            <option value="contract">Contract</option>
            <option value="invoice">Invoice</option>
            <option value="letter">Letter</option>
            <option value="report">Report</option>
            <option value="application">Application</option>
            <option value="policy">Policy</option>
            <option value="memo">Memo</option>
            <option value="minutes">Minutes</option>
            <option value="form">Form</option>
            <option value="regulation">Regulation</option>
            <option value="certificate">Certificate</option>
            <option value="agreement">Agreement</option>
            <option value="notice">Notice</option>
            <option value="statement">Statement</option>
            <option value="other">Other</option>
          </select>
        </div>

        <div class="field">
          <label for="metaCategory">Category (Department)</label>
          <select id="metaCategory">
            <option value="">Unassigned</option>
            <option value="Finance">Finance</option>
            <option value="Compliance">Compliance</option>
            <option value="Operations">Operations</option>
            <option value="HR">HR</option>
            <option value="Board">Board</option>
            <option value="IT">IT</option>
          </select>
        </div>

        <div class="field">
          <label for="metaJurisdiction">Jurisdiction</label>
          <select id="metaJurisdiction">
            <option value="">Unknown</option>
            <option value="EU">EU</option>
            <option value="US">US</option>
            <option value="UK">UK</option>
            <option value="DE">DE</option>
            <option value="PL">PL</option>
            <option value="FR">FR</option>
            <option value="ES">ES</option>
            <option value="NL">NL</option>
            <option value="IT">IT</option>
            <option value="CH">CH</option>
            <option value="international">International</option>
          </select>
        </div>

        <div class="field">
          <label for="metaSensitivity">Sensitivity</label>
          <select id="metaSensitivity">
            <option value="public">Public</option>
            <option value="internal">Internal</option>
            <option value="confidential">Confidential</option>
            <option value="restricted">Restricted</option>
          </select>
        </div>

        <div class="field">
          <label for="metaStatus">Status</label>
          <select id="metaStatus">
            <option value="draft">Draft</option>
            <option value="in_review">In Review</option>
            <option value="approved">Approved</option>
            <option value="archived">Archived</option>
          </select>
        </div>

        <div class="field">
          <label for="metaInForce">Enforcement</label>
          <select id="metaInForce">
            <option value="unknown">Unknown</option>
            <option value="in_force">In Force</option>
            <option value="archival">Archival</option>
          </select>
        </div>

        <div class="field">
          <label for="metaLanguage">Language</label>
          <input type="text" id="metaLanguage" placeholder="e.g. English, Polish" />
        </div>
      </div>

      <div class="field">
        <label for="metaClient">Client / Counterparty</label>
        <input type="text" id="metaClient" placeholder="Client or counterparty name" />
      </div>

      <div class="field">
        <label for="metaTags">Tags (comma-separated)</label>
        <input type="text" id="metaTags" placeholder="e.g. urgent, kyc, compliance, 2024" />
      </div>

      <div class="actions">
        <button id="saveMetadataBtn" type="button" class="btn-primary">Save</button>
        <button id="cancelMetadataBtn" type="button" class="btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Contract Action Hub Modal -->
  <div id="contractActionModal" class="modal-overlay" style="display: none;">
    <div class="modal-content modal-action-hub">
      <input type="hidden" id="actionHubDocId" />

      <div id="actionHubHeader" class="action-hub-header"></div>

      <div id="actionHubSummary" class="action-hub-summary"></div>

      <div id="actionHubCards" class="action-hub-cards"></div>

      <div id="actionHubResult" class="action-hub-result" style="display: none;"></div>

      <div class="actions" style="margin-top: 1rem;">
        <button id="actionHubObligationsBtn" type="button" class="btn-secondary">View All Obligations</button>
        <button id="closeActionHubBtn" type="button" class="btn-secondary">Close</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
